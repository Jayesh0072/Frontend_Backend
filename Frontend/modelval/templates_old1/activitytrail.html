{% extends 'base.html' %}
{% load static %}
{% block content %}  
 
<form action="" id="target" method="post" enctype="multipart/form-data" class="form-horizontal">   
  {% csrf_token %}  
      <!-- Page Header -->
      <div class="page-header">
        <div class="row align-items-end mb-3">
          <div class="col-sm">
            <h1 class="page-header-title">Activity Trail</h1>
          </div>
          <!-- End Col -->
        </div>
        <!-- End Row -->

        <!-- Nav -->
        <!-- Nav -->
        <div class="js-nav-scroller hs-nav-scroller-horizontal">
          <span class="hs-nav-scroller-arrow-prev" style="display: none;">
            <a class="hs-nav-scroller-arrow-link" href="javascript:;">
              <i class="bi-chevron-left"></i>
            </a>
          </span>

          <span class="hs-nav-scroller-arrow-next" style="display: none;">
            <a class="hs-nav-scroller-arrow-link" href="javascript:;">
              <i class="bi-chevron-right"></i>
            </a>
          </span>

          <ul class="nav nav-tabs page-header-tabs" id="projectsTab" role="tablist">
            <!-- <li class="nav-item">
              <a class="nav-link active" href="./project-activity.html">Activity</a>
            </li>  -->
          </ul>
        </div>
        <!-- End Nav -->
      </div>
      <!-- End Page Header -->

      <div class="row justify-content-lg-center">
        <div class="card-title mb-1"> 
          <div class="col col-md-4" style="margin: 0;padding: 0;">
            <!-- {{activity_lst}} -->
              <select id="selectSection" name="selectSection" style="margin-bottom: 18px;" class="form-control form-control-sm" onchange="$('#target').submit()" >        
                  <option value="Select">Select</option> 
                  {% for id in mdlid_lst %}
                      <option style=" color: {{data.color}};  background-color: {{data.bgColor}};" value="{{id}}">{{id}}</option>
                  {% endfor %}
                  <!-- <option value="addnew" data-toggle="modal">add new</option> -->
              </select>
  
              
          </div>
        </div>
        <div class="col-lg-9">
          
          <!-- Step -->
          {% for activity in activity_lst %}
          <ul class="step">
            <!-- Step Item -->
            <li class="step-item">
              <div class="step-content-wrapper">
                <span class="step-icon step-icon-pseudo step-icon-soft-dark"></span>
              
                <div class="step-content">
                  <h5 class="step-title">   
                    <a class="text-dark" href="#">{{activity.activity_trigger}}/{{activity.activity_details}}</a>
                  </h5>

                  <p class="fs-5 mb-1">{{activity.user}} <a class="text-uppercase" href="#"><i class="bi-journal-bookmark-fill"></i></a><span class="badge bg-soft-success text-success rounded-pill"><span class="legend-indicator bg-success"></span></span></p>

                  <span class="text-muted small text-uppercase">{{activity.date}}   {{activity.time}}</span>
                </div>
              </div>
            </li>
            <!-- Step Item -->
            
          </ul>
          {% endfor %}
          <!-- End Step -->
        </div>
      </div>
   


  <!-- ========== END MAIN CONTENT ========== -->
</form>
{% endblock content %}
{% block script %}
  <!-- JS Global Compulsory  -->
  <!-- JS Implementing Plugins  -->
  <script src="{% static 'Front/dist/assets/vendor/jquery/dist/jquery.min.js' %}"></script>
  <script src="{% static 'Front/dist/assets/vendor/jquery-migrate/dist/jquery-migrate.min.js' %}"></script>
  <script src="{% static 'Front/dist/assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js' %}"></script>

  <script src="{% static 'Front/dist/assets/vendor/hs-navbar-vertical-aside/dist/hs-navbar-vertical-aside.min.js' %}"></script>
  <script src="{% static 'Front/dist/assets/vendor/hs-form-search/dist/hs-form-search.min.js' %}"></script>

  <script src="{% static 'Front/dist/assets/vendor/hs-nav-scroller/dist/hs-nav-scroller.min.js' %}"></script>
  <script src="{% static 'Front/dist/assets/vendor/hs-sticky-block/dist/hs-sticky-block.min.js' %}"></script>


  <!-- JS Front -->
  <script src="{% static 'Front/dist/assets/js/theme.min.js' %}"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
      $('#selectSection').val('{{refer_id}}')
       

  });

  function selectmdlid(){ 
    mdlid = $('#selectSection').val()
    $('#user').empty()
    $.ajax({
        url: '/selectmdlid/', 
        data:{mdlid: $('#selectSection').val()},
        dataType: 'json',
        success: function (data) {              
          $("#addon").append(data.activity_lst[0].addon)
          $('#activity_trigger').append(data.activity_lst[0].activity_trigger)
          $('#user').append(data.activity_lst[0].user)                
        }
    });
  }
</script>

<script>
  (function() {
    window.onload = function () {
      

      // INITIALIZATION OF NAVBAR VERTICAL ASIDE
      // =======================================================
      new HSSideNav('.js-navbar-vertical-aside').init()


      // INITIALIZATION OF FORM SEARCH
      // =======================================================
      new HSFormSearch('.js-form-search')


      // INITIALIZATION OF BOOTSTRAP DROPDOWN
      // =======================================================
      HSBsDropdown.init()


      // INITIALIZATION OF NAV SCROLLER
      // =======================================================
      new HsNavScroller('.js-nav-scroller')


      // INITIALIZATION OF STICKY BLOCKS
      // =======================================================
      new HSStickyBlock('.js-sticky-block', {
        targetSelector: document.getElementById('header').classList.contains('navbar-fixed') ? '#header' : null
      })
    }
  })()
</script>

<!-- Style Switcher JS -->

<script>
    (function () {
      // STYLE SWITCHER
      // =======================================================
      const $dropdownBtn = document.getElementById('selectThemeDropdown') // Dropdowon trigger
      const $variants = document.querySelectorAll(`[aria-labelledby="selectThemeDropdown"] [data-icon]`) // All items of the dropdown

      // Function to set active style in the dorpdown menu and set icon for dropdown trigger
      const setActiveStyle = function () {
        $variants.forEach($item => {
          if ($item.getAttribute('data-value') === HSThemeAppearance.getOriginalAppearance()) {
            $dropdownBtn.innerHTML = `<i class="${$item.getAttribute('data-icon')}" />`
            return $item.classList.add('active')
          }

          $item.classList.remove('active')
        })
      }

      // Add a click event to all items of the dropdown to set the style
      $variants.forEach(function ($item) {
        $item.addEventListener('click', function () {
          HSThemeAppearance.setAppearance($item.getAttribute('data-value'))
        })
      })

      // Call the setActiveStyle on load page
      setActiveStyle()

      // Add event listener on change style to call the setActiveStyle function
      window.addEventListener('on-hs-appearance-change', function () {
        setActiveStyle()
      })
    })()
  </script>

<!-- End Style Switcher JS -->


{% endblock script %}