{% extends 'rmsebase.html' %} 
{% load static %} 
{% block style%}
<style>
    .fixTableHead {
        overflow-y: auto;
        height: 550px;
      }
      .fixTableHead thead th {
        position: sticky;
        top: 0;
      }
      .fixTableHead table {
        border-collapse: collapse;        
        width: 100%;
      }
      .btn-circle.btn-xl {
    width: 30px;
    height: 30px;
    padding: 13px 13px;
    border-radius: 40px;
    font-size: 12px;
    text-align: center;
  }
  
.btn-circle.btn-xl {
    width: 30px;
    height: 30px;
    padding: 13px 13px;
    border-radius: 40px;
    font-size: 12px;
    text-align: center;
  }
</style>
<style>
  
    .fs--2 {
      font-size: .64rem !important;
      font-weight: 600 !important;
    }
    .chat .chat-message .received-message-content {
        position: relative;
    }
    .chat .chat-message .received-message-content:not(.chat .chat-message .received-message-content.gallery):before {
        content: " ";
        position: absolute;
        width: 0;
        height: 0;
        left: -12px;
        right: auto;
        top: -1px;
        bottom: auto;
        border: 11px solid;
        border-color: #e3e6ed rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) rgba(0, 0, 0, 0);
    }
    .chat .chat-message .received-message-content:not(.chat .chat-message .received-message-content.gallery):after {
        content: " ";
        position: absolute;
        width: 0;
        height: 0;
        left: -10px;
        right: auto;
        top: 0px;
        bottom: auto;
        border: 10px solid;
        border-color: #fff rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) rgba(0, 0, 0, 0);
    } 
    .chat .chat-message_sent .sent-message-content {
      position: relative;
    }
    .chat .chat-message_sent .sent-message-content:not(.chat .chat-message .sent-message-content.gallery):after {
       
      content: " ";
        position: absolute;
        width: 0;
        height: 0;
        left: auto;
        right: -12px;
        top: auto;
        bottom: 0;
        border: 12px solid;
        border-color:transparent transparent #3874ff  transparent; 
    }
    
    .flex-end-center {
        -webkit-box-pack: end;
        -ms-flex-pack: end;
        justify-content: flex-end;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
    }
    
     
    .flex-1 {
      -webkit-box-flex: 1;
    
      -ms-flex: 1;
    
      flex: 1;
    
    }
      .support-chat-container {
      display: none;
      &.show {
        display: block;
      }
    }
    .support-chat {
      position: fixed;
      bottom: map-get($spacers, 7);
      right: 0;
      max-width: 27.87rem;
      width: 100%;
      transform: scale(0);
      opacity: 0;
      transform-origin: bottom right;
      z-index: 1045;
      transition: 0.3s ease-out;
      padding-bottom: map-get($spacers, 7);
      .support-chat-start & {
        right: auto;
        left: 0;
        transform-origin: bottom left;
      }
      .support-chat-bottom-lg & {
        bottom: map-get($spacers, 11);
      }
      @include media-breakpoint-up(sm) {
        right: map-get($spacers, 3);
        .support-chat-start & {
          left: map-get($spacers, 3);
        }
      }
      @include media-breakpoint-up(lg) {
        right: map-get($spacers, 5);
        .support-chat-start & {
          left: map-get($spacers, 5);
        }
      }
      .card {
        box-shadow: 0px 0px 32px 0px rgba(36, 40, 46, 0.12);
        .dark & {
          box-shadow: 0px 0px 32px 10px rgba(0, 0, 0, 0.41);
        }
      }
      .card-body {
        height: 27rem;
      }
      &.show-chat {
        transform: scale(1);
        opacity: 1;
      }
      .send-btn {
        width: 37.06px;
        height: 37.06px;
        border-radius: 50%;
        color: var(--#{$prefix}primary);
        &:hover {
          background-color: var(--#{$prefix}gray-100);
          color: var(--#{$prefix}primary-500);
        }
        &:active {
          background-color: var(--#{$prefix}gray-200);
          color: var(--#{$prefix}primary-500);
        }
      }
    }
    .btn-chat-close {
        border-radius: 50%;
        width: 3rem;
        .btn-text,
        .fa-circle {
          display: none;
        }
        .fa-chevron-down {
          display: block;
        }
      }
    .support-chat + .btn-support-chat {
      position: fixed;
      bottom: map-get($spacers, 6);
      right: map-get($spacers, 3);
      width: 9rem;
      height: 3rem;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      background-color: var(--#{$prefix}white) !important;
      z-index: 1045;
      border-radius: var(--#{$prefix}border-radius-pill);
      box-shadow: 0px 0px 32px 0px rgba(36, 40, 46, 0.12);
      transition: 0.3s ease;
      .dark & {
        box-shadow: 0px 0px 32px 10px rgba(0, 0, 0, 0.41);
      }
      .support-chat-start & {
        right: auto;
        left: map-get($spacers, 3);
      }
      .support-chat-bottom-lg & {
        bottom: map-get($spacers, 10);
      }
      @include media-breakpoint-up(sm) {
        right: map-get($spacers, 5);
        .support-chat-start & {
          left: map-get($spacers, 5);
        }
      }
      @include media-breakpoint-up(lg) {
        right: map-get($spacers, 7);
        .support-chat-start & {
          left: map-get($spacers, 7);
        }
      }
      &:hover {
        background-color: var(--#{$prefix}gray-100) !important;
      }
      .fa-chevron-down {
        display: none;
      }
      .btn-chat-close {
        border-radius: 50%;
        width: 3rem;
        .btn-text,
        .fa-circle {
          display: none;
        }
        .fa-chevron-down {
          display: block;
        }
      }
    }
    
    
    
    </style>
{% endblock style %}
{% block content %}  
{% csrf_token %}
<div class="col-lg-12">
    <div class="card">
        <div class="card-header">
            <div class="row form-group" style="margin-bottom: 0px;">
                <div class="col col-md-11">
                    Data Statistics of Numerical Variables
                </div>
                <div class="col-12 col-md-1" style="display: flex;justify-content: flex-end;">         
                    <div style="border:solid 0px #009bd9;border-radius: 4px;width: 24px;height:24px; margin-left:4px;text-align:center;line-height:20px;"> 
                       <img src='\static\images\save.png' onclick="saveTbl()" title="Save" style='cursor:pointer;'/>
                                       
                    </div>  
                    <div style="border:solid 0px;border-radius: 4px; width: 24px;height:24px; margin-left:4px;text-align:center;line-height:20px;font-size: 16px;display: flex;flex-direction: row;align-items: center;">                  
                        <i class="bi bi-chat-right-quote"  style='cursor:pointer;' onclick="$('#divVT_Comm_Chat').modal('toggle')" ></i>
                     </div> 
               </div> 
              
            </div>                  
        </div>
        <div class="card-body card-block">                             
            <ul class="nav nav-underline" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-item nav-link active" id="custom-nav-numtype-tab" onclick="setType('DataDesc')" data-bs-toggle="tab" href="#custom-nav-numtype" role="tab" aria-controls="custom-nav-numtype"
                        aria-selected="false">Describe All the Numeric Variables</a>
                </li>
                <li class="nav-item"> 
                    <a class="nav-item nav-link" id="custom-nav-mean_ad-tab" onclick="setType('DataMean')" data-bs-toggle="tab" href="#custom-nav-mean_ad" role="tab" aria-controls="custom-nav-mean_ad"
                        aria-selected="true">Mean Absolute Deviation</a>
                    </li>
                <li class="nav-item"> 
                    <a class="nav-item nav-link" id="custom-nav-median_ad-tab" onclick="setType('DataMedian')" data-bs-toggle="tab" href="#custom-nav-median_ad" role="tab" aria-controls="custom-nav-median_ad"
                        aria-selected="true">Median Absolute Deviation</a> 
                        
                </li> 
            </ul>
            <div class="tab-content pl-3 pt-2" id="nav-tabContent">
                <div class="tab-pane fade show active" id="custom-nav-numtype" role="tabpanel" aria-labelledby="custom-nav-numtype-tab">
                    <!-- <div class="table-responsive table--no-card m-b-40">
                        <table id='descData' class="table table-borderless table-striped table-earning"> -->
                        <div class="table-responsive" style="height: 400px; overflow: scroll;">
                            <table class="table table-sm fs--1 mb-0">
                            <thead>
                                <tr>                
                                    <th style="border: 1px solid black;text-align: center;" class="sort align-middle" scope="col" ></th> 
                                    <th style="border: 1px solid black;text-align: center;" class="sort align-middle" scope="col" >count</th> 
                                    <th style="border: 1px solid black;text-align: center;" class="sort align-middle" scope="col" >min</th> 
                                    <th style="border: 1px solid black;text-align: center;" class="sort align-middle" scope="col" >max</th> 
                                    <th style="border: 1px solid black;text-align: center;" class="sort align-middle" scope="col" >mean</th> 
                                    <th style="border: 1px solid black;text-align: center;" class="sort align-middle" scope="col" >std</th>  
                                    <th style="border: 1px solid black;text-align: center;" class="sort align-middle" scope="col" >25%</th>
                                    <th style="border: 1px solid black;text-align: center;" class="sort align-middle" scope="col" >50%</th>
                                    <th style="border: 1px solid black;text-align: center;" class="sort align-middle" scope="col" >75%</th>
                                </tr>
                            </thead>
                            <tbody>           
                                {% for val in desc %}  
                                <tr>           
                                    <td style="border: 1px solid black;" class="align-middle time white-space" >{{ val.colName }}</td> 
                                    <td style="border: 1px solid black;text-align: center;" class="align-middle time white-space" >{{ val.count_val }}</td> 
                                    <td style="border: 1px solid black;text-align: center;" class="align-middle time white-space" >{{ val.min_val }}</td> 
                                    <td style="border: 1px solid black;text-align: center;" class="align-middle time white-space" >{{ val.max_val }}</td> 
                                    <td style="border: 1px solid black;text-align: center;" class="align-middle time white-space" >{{ val.mean_val }}</td> 
                                    <td style="border: 1px solid black;text-align: center;" class="align-middle time white-space" >{{ val.std_val }}</td> 
                                    <td style="border: 1px solid black;text-align: center;" class="align-middle time white-space" >{{ val.per25_val }}</td> 
                                    <td style="border: 1px solid black;text-align: center;" class="align-middle time white-space" >{{ val.per50_val }}</td> 
                                    <td style="border: 1px solid black;text-align: center;" class="align-middle time white-space" >{{ val.per75_val }}</td> 
                                </tr>            
                                {% endfor %}           
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="tab-pane fade" id="custom-nav-mean_ad" role="tabpanel" aria-labelledby="custom-nav-mean_ad-tab">
                    <!-- <div class="table-responsive table--no-card m-b-40">
                        <table id='mean_adData' class="table table-borderless table-striped table-earning"> -->
                    <div class="table-responsive" style="height: 400px; overflow: scroll;width:100%">
                        <table class="table table-sm fs--1 mb-0">
                            <thead>
                                <tr> 
                                    <th style="border: 1px solid black;text-align: center;" width="50%" class="sort align-middle" scope="col" >
                                            Column
                                    </th class="sort align-middle" scope="col" >
                                    <th style="border: 1px solid black;text-align: center;" width="50%">
                                            Value
                                    </th> 
                                </tr>                                           
                            </thead>
                            <tbody>
                                {% for key, val in mean_adresult.items  %}
                                <tr> 
                                    <td style="border: 1px solid black;" class="align-middle time white-space">{{ key }}</td>  
                                    <td style="border: 1px solid black;text-align: center;" class="align-middle time white-space">{{ val }}</td>  
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>                                  
                <div class="tab-pane fade" id="custom-nav-median_ad" role="tabpanel" aria-labelledby="custom-nav-median_ad-tab">
                    <!-- <div class="table-responsive table--no-card m-b-40">
                        <table id='median_adData' class="table table-borderless table-striped table-earning"> -->
                    <div class="table-responsive" style="height: 400px; overflow: scroll;">
                        <table class="table table-sm fs--1 mb-0">
                            <thead>
                                <tr> 
                                    <th style="border: 1px solid black;text-align: center;"  width="50%" class="sort align-middle" scope="col" >
                                            Column
                                    </th>
                                    <th style="border: 1px solid black;text-align: center;" width="50%" class="sort align-middle" scope="col" >
                                            Value
                                    </th> 
                                </tr>                                           
                            </thead>
                            <tbody>
                                {% for key, val in median_adresult.items  %}
                                <tr> 
                                    <td style="border: 1px solid black;" class="align-middle time white-space">{{ key }}</td>  
                                    <td style="border: 1px solid black;text-align: center;" class="align-middle time white-space">{{ val }}</td>  
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-footer">
            <div class="col-12 gy-6">
                <div class="row g-3 justify-content-end">
                    <div class="col-auto">
                        <button class="btn btn-primary px-5" onclick="goNext()">Next</button>
                    </div>
                </div>  
            </div>
        </div>
    </div>    
</div>
<div class="modal fade" id="divTune" tabindex="-1" aria-labelledby="divTune" aria-hidden="true">
    <div class="modal-dialog modal-md modal-dialog-scrollable modal-lg"> 
     <div class="modal-content">
       <div class="modal-header">
         <h5 class="modal-title" id="scrollingLongModalLabel2">Comments </h5>
         <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close"><span class="fas fa-times fs--1"></span></button>
         <div class="d-flex">
           <button class="btn btn-icon btn-primary btn-circle btn-xl" id="btnchat" onclick="toogleChat('chat')"><i class="bi bi-chat-text"></i></button>
           <button class="btn btn-icon btn-primary btn-circle btn-xl" style="display: none;" id="btncomment" onclick="toogleChat('comment')"><i class="bi bi-chat-quote"></i></button>
          
         </div>
       </div>
       <div class="modal-body p-5 px-md-6">  
           <div class="chat-content tab-content flex-1" style="flex: 1;">
               <div class="tab-pane h-100 fade active show" id="tab-thread-1" role="tabpanel" aria-labelledby="tab-thread-1">
                 <div class="card flex-1 h-100"> 
                   <div id="divChatHeader" style="display: none!important;;" class="card-body p-3 p-sm-4 d-flex flex-column scrollbar">
                       <div class="row mb-3 position-relative">
                           <div  class="col-sm-12">
                               <div id="divresp_2" style="overflow-y: scroll;;height: 210px !important;">
                                   
                               
                               </div>
                           </div>
                       </div>                           
                   </div>
                   <div id="divChatfooter" style="display: none;"  class="card-footer">                    
                     <div class="row mb-3 position-relative">
                       <div  class="col-sm-11">
                         <textarea id ="txtcomment" rows="2" style="width: 100%;resize: none;"></textarea>
                       </div> 
                       <div class="col-sm-1">                   
                         <div class="d-flex justify-content-end align-items-end">
                          
                           <div>
                             <button class="btn btn-icon btn-primary btn-circle btn-xl" type="button" onclick="updateResponse()">
                               <i class="bi bi-send"></i></button>
                           </div>
                         </div>
                       </div>
                     </div> 
                   </div>      
                   
                   <div id="divRespHeader"  class="card-body p-3 p-sm-4 d-flex flex-column scrollbar">
                     <div class="row mb-3 position-relative">
                       <div  class="col-sm-12">
                         <textarea id ="txtReportComments" onkeyup="enableSave()" rows="12"  style="width: 100%;resize: none;"></textarea>
                       </div>                        
                     </div>
                      
                                       
                     <div class="row mb-3 position-relative">
                     
                       <div class="col-sm-12">                   
                         <div class="d-flex justify-content-end align-items-end">
                          
                           <div>
                             <button class="btn btn-primary" disabled type="button" id="btnSave" onclick="saveReportComment()">Save
                               </button>
                           </div>
                         </div>
                       </div>
                     </div> 
                   </div> 
                 </div>
               </div> 
             </div>

            
       </div>
       <!-- <div class="modal-footer">
           <div class="col-auto" style="display: flex; justify-content: flex-end;">
               <button type="button" class="btn btn-sm" style="margin-right: 10px;" onclick="$('#divTune').modal('toggle')" >Cancel</button> 
           <button type="button" class="btn btn-primary btn-sm" style="margin-right: 10px;" onclick="saveReportComment()" >Save</button>
           </div>
       </div> -->
     </div>
   </div> 

</div>       
                
                        {% endblock content %}
{%  block script %}
    <script src="{% static 'js/main.js' %}"></script>
    <script src="{% static 'jquery-3.5.1.js' %}"></script>
    <!-- Jquery JS-->
    <script src="{% static 'vendor/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'dataTables.min.js' %}"></script>
    <script src="{% static 'js/chatroom.js' %}"></script>
    <script type='text/javascript' >
        
        let tabSel='DataDesc'
        $(document).ready( function () {  
            connectWS('{{request.session.vt_mdl}}');
            $('#divresp_2').empty()
            $("#txtSelUtil").val('Data Statistics of Numerical Variables')
            $("#txtSelSubUtil").val(tabSel)
            $("#txtSelUtilType").val('table')
            getVT_Comm_History('divresp_2','Data Statistics of Numerical Variables', tabSel,'{{request.session.vt_mdl}}')  
            // $.ajax({ 
            // url: '/ValidationCommentHistory/',
            // data:{'utility':'Data Statistics of Numerical Variables','subutility': tabSel,'mdl_id':'{{request.session.vt_mdl}}'},
            // dataType: 'json',
            // success: function (data) {
            //     debugger
            //   $('#txtReportComments').val(data.comment)
            // qtnArr = '';
            // $.each(data.data, function(key, val) { 
            //     if(val.msgcss=='R')
            //     {
            //     qtnArr +=' <div class="d-flex chat-message">';
            //     qtnArr +='         <div class="d-flex mb-2 flex-1">';
            //         qtnArr +='           <div class="w-100 w-xxl-75">';
            //         qtnArr +='             <div class="d-flex hover-actions-trigger">';                     
            //             qtnArr +='               <div class="chat-message-content received me-2">';
            //             qtnArr +='                 <div class="mb-1 received-message-content border rounded-2 p-3">';
            //                 qtnArr +='                    <p class="mb-0">'+val.Comment+'</p>';
            //                 qtnArr +='                 </div>';
            //                 qtnArr +='     </div>         ';                  
                                
            //                 qtnArr +='  </div>';
            //                 qtnArr +='   <p class="mb-0 fs--2 text-600 fw-semi-bold ">'+val.uinitials +' commented on '+val.createdt+'</p>';
            //                 qtnArr +=' </div>';
            //                 qtnArr +=' </div>';
            //                 qtnArr +='  </div>';
            //     }
            //     else if(val.msgcss=='S')
            //     {

            //     qtnArr +=' <div class="d-flex chat-message">';
            //         qtnArr +=' <div class="d-flex mb-2 justify-content-end flex-1">';
            //         qtnArr +=' <div class="w-100 w-xxl-75">';
            //         qtnArr +=' <div class="d-flex flex-end-center hover-actions-trigger">';
            //         qtnArr +=' <div class="d-sm-none hover-actions align-self-center me-2 start-0">';                 
                    
            //             qtnArr +='<div class="bg-white rounded-pill d-flex align-items-center border border-300 px-2 actions">';
            //             // qtnArr +='<button class="btn p-2" type="button"><span class="fa-solid fa-reply text-primary"></span></button>';
            //             qtnArr +='<button class="btn p-2" type="button"><span class="fa-solid fa-pen-to-square text-primary"></span></button>';
            //             // qtnArr +='<button class="btn p-2" type="button"><span class="fa-solid fa-trash text-primary"></span></button>';
            //             // qtnArr +='<button class="btn p-2" type="button"><span class="fa-solid fa-share text-primary"></span></button>';
            //             // qtnArr +='<button class="btn p-2" type="button"><span class="fa-solid fa-face-smile text-primary"></span></button>';
            //             qtnArr +='</div>';
            //             qtnArr +='</div>';
            //         qtnArr +='   <div class="d-none d-sm-flex">';
            //             qtnArr +=' <div class="hover-actions position-relative align-self-center">';
            //             // qtnArr +=' <button class="btn p-2 fs--2"><span class="fa-solid fa-reply text-primary"></span></button>';
            //             qtnArr +=' <button class="btn p-2 fs--2" onclick="getCommentforEdit(' + val.Response_id +')" ><span class="fa-solid fa-pen-to-square text-primary" ></span></button>';
            //             // qtnArr +=' <button class="btn p-2 fs--2"><span class="fa-solid fa-share text-primary"></span></button>';
            //             // qtnArr +=' <button class="btn p-2 fs--2"><span class="fa-solid fa-trash text-primary"></span></button>';
            //             // qtnArr +=' <button class="btn p-2 fs--2"><span class="fa-solid fa-face-smile text-primary"></span></button>';
            //             qtnArr +='  </div>';
            //             qtnArr +=' </div>';
            //             qtnArr +=' <div class="chat-message-content me-2">';
            //             qtnArr +='  <div class="mb-1 sent-message-content light bg-primary rounded-2 p-3 text-white">';
            //                 qtnArr +=' <p class="mb-0">'+val.Comment+'</p>';
            //                 qtnArr +=' </div>';
            //                 qtnArr +='  </div>';
            //                 qtnArr +=' </div>';
            //                 qtnArr +=' <div class="text-end">';
            //                 qtnArr +=' <p class="mb-0 fs--2 text-600 fw-semi-bold">'+val.uinitials +' commented on '+val.createdt+' </p>';
            //                 qtnArr +=' </div>';
            //                 qtnArr +=' </div>';
            //                 qtnArr +=' </div>';
            //                 qtnArr +=' </div> ';
            //     } 
            // }) 
            // $('#divresp_2').append(qtnArr)       
            // }
            // });
           

            $('#descData').DataTable({
                sDom: 'lrtip',
                "ordering": false,
                fixedColumns: {
                    leftColumns: 1
                    },
                scrollY: 400,
                scrollX: true,
                scroller: true,
                paging:false,
                info:false
                }); 

            
            $('#mean_adData11').DataTable({
                sDom: 'lrtip',
                "ordering": false,
                fixedColumns: {
                    leftColumns: 1
                    },
                scrollY: 500,
                scrollX: true,
                scroller: true,
                paging:false,
                info:false
                }); 

                
                $('#median_adData11').DataTable({
                    sDom: 'lrtip',
                    "ordering": false,
                    fixedColumns: {
                        leftColumns: 1
                        },
                    scrollY: 500,
                    scrollX: true,
                    scroller: true,
                    paging:false,
                    info:false
                    });
        } );
    
        function setType(tab){
            tabSel=tab
            $('#divresp_2').empty()
            $.ajax({ 
            url: '/ValidationCommentHistory/',
            data:{'utility':'Data Statistics of Numerical Variables','subutility': tabSel,'mdl_id':'{{request.session.vt_mdl}}'},
            dataType: 'json',
            success: function (data) {
              $('#txtReportComments').val(data.comment)
            qtnArr = '';
            $.each(data.data, function(key, val) { 
                if(val.msgcss=='R')
                {
                qtnArr +=' <div class="d-flex chat-message">';
                qtnArr +='         <div class="d-flex mb-2 flex-1">';
                    qtnArr +='           <div class="w-100 w-xxl-75">';
                    qtnArr +='             <div class="d-flex hover-actions-trigger">';                     
                        qtnArr +='               <div class="chat-message-content received me-2">';
                        qtnArr +='                 <div class="mb-1 received-message-content border rounded-2 p-3">';
                            qtnArr +='                    <p class="mb-0">'+val.Comment+'</p>';
                            qtnArr +='                 </div>';
                            qtnArr +='     </div>         ';                  
                                
                            qtnArr +='  </div>';
                            qtnArr +='   <p class="mb-0 fs--2 text-600 fw-semi-bold ">'+val.uinitials +' commented on '+val.createdt+'</p>';
                            qtnArr +=' </div>';
                            qtnArr +=' </div>';
                            qtnArr +='  </div>';
                }
                else if(val.msgcss=='S')
                {

                qtnArr +=' <div class="d-flex chat-message">';
                    qtnArr +=' <div class="d-flex mb-2 justify-content-end flex-1">';
                    qtnArr +=' <div class="w-100 w-xxl-75">';
                    qtnArr +=' <div class="d-flex flex-end-center hover-actions-trigger">';
                    qtnArr +=' <div class="d-sm-none hover-actions align-self-center me-2 start-0">';                 
                    
                        qtnArr +='<div class="bg-white rounded-pill d-flex align-items-center border border-300 px-2 actions">';
                        // qtnArr +='<button class="btn p-2" type="button"><span class="fa-solid fa-reply text-primary"></span></button>';
                        qtnArr +='<button class="btn p-2" type="button"><span class="fa-solid fa-pen-to-square text-primary"></span></button>';
                        // qtnArr +='<button class="btn p-2" type="button"><span class="fa-solid fa-trash text-primary"></span></button>';
                        // qtnArr +='<button class="btn p-2" type="button"><span class="fa-solid fa-share text-primary"></span></button>';
                        // qtnArr +='<button class="btn p-2" type="button"><span class="fa-solid fa-face-smile text-primary"></span></button>';
                        qtnArr +='</div>';
                        qtnArr +='</div>';
                    qtnArr +='   <div class="d-none d-sm-flex">';
                        qtnArr +=' <div class="hover-actions position-relative align-self-center">';
                        // qtnArr +=' <button class="btn p-2 fs--2"><span class="fa-solid fa-reply text-primary"></span></button>';
                        qtnArr +=' <button class="btn p-2 fs--2" onclick="getCommentforEdit(' + val.Response_id +')" ><span class="fa-solid fa-pen-to-square text-primary" ></span></button>';
                        // qtnArr +=' <button class="btn p-2 fs--2"><span class="fa-solid fa-share text-primary"></span></button>';
                        // qtnArr +=' <button class="btn p-2 fs--2"><span class="fa-solid fa-trash text-primary"></span></button>';
                        // qtnArr +=' <button class="btn p-2 fs--2"><span class="fa-solid fa-face-smile text-primary"></span></button>';
                        qtnArr +='  </div>';
                        qtnArr +=' </div>';
                        qtnArr +=' <div class="chat-message-content me-2">';
                        qtnArr +='  <div class="mb-1 sent-message-content light bg-primary rounded-2 p-3 text-white">';
                            qtnArr +=' <p class="mb-0">'+val.Comment+'</p>';
                            qtnArr +=' </div>';
                            qtnArr +='  </div>';
                            qtnArr +=' </div>';
                            qtnArr +=' <div class="text-end">';
                            qtnArr +=' <p class="mb-0 fs--2 text-600 fw-semi-bold">'+val.uinitials +' commented on '+val.createdt+' </p>';
                            qtnArr +=' </div>';
                            qtnArr +=' </div>';
                            qtnArr +=' </div>';
                            qtnArr +=' </div> ';
                } 
            }) 
            $('#divresp_2').append(qtnArr)       
            }
            });
        }
        function saveReportComment()
        { 
        $.ajax({ 
            url: '/save_desc_comments/',
            data:{'utility':'Data Statistics of Numerical Variables','comment':  $("#txtReportComments").val(),'type':'table','tableType':tabSel,'destination':tabSel},
            dataType: 'json',
            success: function (data) {
                    if(data.is_taken)
                    { 
                    alert('Comment saved sucessfully.')             
                    }   
            }
            });
        } 
        function toogleChat(id){
      var myClass = $("#iconmsg").attr("class"); 
      if(id=='chat'){       
        $("#btncomment").show();
        $("#btnchat").hide();
        $("#divChatHeader").show();
        $("#divChatfooter").show();
        $("#divRespHeader").attr('style','display:none !important'); 
      }
      else{
        $("#btncomment").hide();
        $("#btnchat").show();
        $("#divChatHeader").attr('style','display:none !important');
        $("#divChatfooter").attr('style','display:none !important');
        $("#divRespHeader").show(); 
      }
    }

        function saveTbl(){
            $.ajax({ 
                url: '/saveTableInfo/',
                data:{tableType:tabSel,tableName:'Data types and cnt', comments:'',var1:'',var2:''}, 
                dataType: 'json',
                success: function (data) {
                        if(data.is_taken)
                        {
                            alert('Table saved.')
                        }            
                }
            }); 
        }

        function goNext(){
            window.location="{% url 'showcorrelation' %}"
         } 
         function updateResponse(){
        
        $.ajax({ 
        url: '/insert_VT_Discussion_Comments/',
        data:{'utility':'Data Statistics of Numerical Variables','comment':  $("#txtcomment").val(),'sub_utility':tabSel,'mdl_id':'{{request.session.vt_mdl}}'},
        dataType: 'json',
        success: function (data) {  
                    
            if(data.is_taken)
            { 
                sendPerfMonmsg($("#txtcomment").val(),'{{ request.session.uid }}',9,5,'vt_discussion','{{request.session.vt_mdl}}',JSON.parse(data.data)[0].uinitials+' commented on '+ JSON.parse(data.data)[0].createdt,'Data Statistics of Numerical Variables',tabSel,'table')   
                
                
            }   
        }
        });
    }

    function enableSave(){ 
    if($("#txtReportComments").val().length>0){
      $("#btnSave").prop("disabled",false)
    }
    else{
      $("#btnSave").prop("disabled",true)
    }
  }
    </script>
{% endblock script %} 